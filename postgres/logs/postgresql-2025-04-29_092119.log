2025-04-29 09:21:19.158 UTC [1] LOG:  starting PostgreSQL 16.8 (Debian 16.8-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
2025-04-29 09:21:19.158 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2025-04-29 09:21:19.158 UTC [1] LOG:  listening on IPv6 address "::", port 5432
2025-04-29 09:21:19.161 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2025-04-29 09:21:19.167 UTC [66] LOG:  database system was shut down at 2025-04-29 09:21:19 UTC
2025-04-29 09:21:19.171 UTC [1] LOG:  database system is ready to accept connections
2025-04-29 09:21:23.364 UTC [77] FATAL:  database "kfa" does not exist
2025-04-29 09:21:24.421 UTC [79] LOG:  statement: 
	      DO $$ 
	      BEGIN
	        IF EXISTS (SELECT 1 FROM pg_type WHERE typname = 'transaction_type') THEN
	          DROP TYPE transaction_type CASCADE;
	        END IF;
	        CREATE TYPE transaction_type AS ENUM ('Cash In', 'Cash Out', 'Load');
	      END $$;
	    
2025-04-29 09:21:24.425 UTC [79] LOG:  statement: 
	      CREATE TABLE IF NOT EXISTS Transactions (
	        id SERIAL PRIMARY KEY,
	        date TEXT NOT NULL,
	        time TEXT NOT NULL,
	        type transaction_type NOT NULL,
	        amount TEXT NOT NULL,
	        name TEXT NOT NULL,
	        ref TEXT NOT NULL,
	        fee TEXT NOT NULL,
	        remarks TEXT NOT NULL,
	        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
	      );
	    
2025-04-29 09:21:24.432 UTC [79] LOG:  statement: 
	      DO $$ 
	      BEGIN
	        IF NOT EXISTS (SELECT 1 FROM information_schema.columns 
	                       WHERE table_name = 'transactions' AND column_name = 'created_at') THEN
	          ALTER TABLE Transactions ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP;
	        END IF;
	        IF NOT EXISTS (SELECT 1 FROM information_schema.columns 
	                       WHERE table_name = 'transactions' AND column_name = 'updated_at') THEN
	          ALTER TABLE Transactions ADD COLUMN updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP;
	        END IF;
	      END $$;
	    
2025-04-29 09:21:24.438 UTC [79] LOG:  statement: 
	      CREATE TABLE IF NOT EXISTS CurrentBalance (
	        id SERIAL PRIMARY KEY,
	        balance DECIMAL NOT NULL DEFAULT 0.00
	      );
	    
2025-04-29 09:21:24.444 UTC [79] LOG:  statement: SELECT * FROM CurrentBalance
2025-04-29 09:21:24.444 UTC [79] LOG:  statement: INSERT INTO CurrentBalance (balance) VALUES (0.00)
2025-04-29 09:21:28.445 UTC [89] FATAL:  database "kfa" does not exist
2025-04-29 09:21:31.333 UTC [81] LOG:  statement: create database kfa;
2025-04-29 09:21:45.889 UTC [114] LOG:  statement: SELECT balance FROM CurrentBalance WHERE id = 1
2025-04-29 09:21:45.891 UTC [116] LOG:  statement: SELECT * FROM Transactions ORDER BY id ASC
2025-04-29 09:21:45.891 UTC [115] LOG:  execute <unnamed>: SELECT * FROM Transactions WHERE date = $1 ORDER BY id ASC
2025-04-29 09:21:45.891 UTC [115] DETAIL:  parameters: $1 = '2025-04-28'
2025-04-29 09:21:45.915 UTC [115] LOG:  statement: SELECT * FROM Transactions ORDER BY id ASC
2025-04-29 09:21:50.502 UTC [115] LOG:  execute <unnamed>: UPDATE CurrentBalance SET balance = $1 WHERE id = 1
2025-04-29 09:21:50.502 UTC [115] DETAIL:  parameters: $1 = '5000'
2025-04-29 09:21:51.842 UTC [115] LOG:  statement: SELECT balance FROM CurrentBalance WHERE id = 1
2025-04-29 09:21:53.588 UTC [115] LOG:  execute <unnamed>: INSERT INTO Transactions (date, time, type, amount, name, ref, fee, remarks, created_at, updated_at)
	       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
	       RETURNING id
2025-04-29 09:21:53.588 UTC [115] DETAIL:  parameters: $1 = '2025-04-28', $2 = '00:00', $3 = 'Cash In', $4 = '500', $5 = 'KFA', $6 = '12345', $7 = '10', $8 = 'SENT'
2025-04-29 09:21:53.597 UTC [115] LOG:  execute <unnamed>: UPDATE CurrentBalance SET balance = balance + $1 WHERE id = 1
2025-04-29 09:21:53.597 UTC [115] DETAIL:  parameters: $1 = '-500'
2025-04-29 09:21:58.814 UTC [115] LOG:  execute <unnamed>: SELECT * FROM Transactions WHERE date = $1 ORDER BY id ASC
2025-04-29 09:21:58.814 UTC [115] DETAIL:  parameters: $1 = '2025-04-28'
2025-04-29 09:21:58.822 UTC [142] LOG:  statement: SELECT balance FROM CurrentBalance WHERE id = 1
2025-04-29 09:21:58.823 UTC [115] LOG:  statement: SELECT * FROM Transactions ORDER BY id ASC
2025-04-29 09:22:33.332 UTC [200] LOG:  execute <unnamed>: INSERT INTO Transactions (date, time, type, amount, name, ref, fee, remarks, created_at, updated_at)
	       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
	       RETURNING id
2025-04-29 09:22:33.332 UTC [200] DETAIL:  parameters: $1 = '2025-04-28', $2 = '00:00', $3 = 'Cash Out', $4 = '500', $5 = 'kfa', $6 = '12345', $7 = '10', $8 = 'claimed'
2025-04-29 09:22:33.337 UTC [200] LOG:  execute <unnamed>: UPDATE CurrentBalance SET balance = balance + $1 WHERE id = 1
2025-04-29 09:22:33.337 UTC [200] DETAIL:  parameters: $1 = '500'
2025-04-29 09:22:33.804 UTC [200] LOG:  execute <unnamed>: SELECT * FROM Transactions WHERE date = $1 ORDER BY id ASC
2025-04-29 09:22:33.804 UTC [200] DETAIL:  parameters: $1 = '2025-04-28'
2025-04-29 09:22:33.806 UTC [200] LOG:  statement: SELECT balance FROM CurrentBalance WHERE id = 1
2025-04-29 09:22:33.820 UTC [200] LOG:  statement: SELECT * FROM Transactions ORDER BY id ASC
2025-04-29 09:23:19.185 UTC [1] LOG:  could not open file "postmaster.pid": No such file or directory
2025-04-29 09:23:19.185 UTC [1] LOG:  performing immediate shutdown because data directory lock file is invalid
2025-04-29 09:23:19.185 UTC [1] LOG:  received immediate shutdown request
2025-04-29 09:23:19.185 UTC [1] LOG:  could not open file "postmaster.pid": No such file or directory
2025-04-29 09:23:19.191 UTC [1] LOG:  database system is shut down
